import { useEffect, useState } from "react";
import Link from 'next/link';
import Script from 'next/script';

const Navbar = ({ username, profilePicture }) => {
  const [isLoggedIn, setIsLoggedIn] = useState(false);

  useEffect(() => {
    if (typeof window !== "undefined") {
      const loginState = localStorage.getItem("loginState") === "true";
      setIsLoggedIn(loginState);
    }
  }, []);

  return (
    <div className="navbar bg-base-200 drop-shadow-2xl rounded-full mt-4">
      <div className="flex-1">
        <Link href="/" className="btn btn-ghost text-xl font-black"><svg
   width="99.172127mm"
   height="38.821781mm"
   viewBox="0 0 99.172127 38.821781"
   version="1.1"
   id="svg1"
   inkscape:export-filename="bitmap.svg"
   inkscape:export-xdpi="96"
   inkscape:export-ydpi="96"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1"
     pagecolor="#505050"
     bordercolor="#ffffff"
     borderopacity="1"
     inkscape:showpageshadow="0"
     inkscape:pageopacity="0"
     inkscape:pagecheckerboard="1"
     inkscape:deskcolor="#505050"
     inkscape:document-units="mm" />
  <defs
     id="defs1" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-57.247873,-113.15114)">
    <path
       style="font-size:50.8px;font-family:'IBM Plex Sans';-inkscape-font-specification:'IBM Plex Sans';fill:#a6adbb;stroke:none;stroke-width:0.264583"
       d="m 57.380164,151.23103 5.334,-26.67 h 7.112 l -1.2192,6.1976 h 0.3048 c 1.016,-2.1336 2.218267,-3.79307 3.6068,-4.9784 1.388533,-1.2192 3.132667,-1.8288 5.2324,-1.8288 2.065867,0 3.640667,0.6096 4.7244,1.8288 1.1176,1.18533 1.6764,2.87867 1.6764,5.08 0,0.64347 -0.0508,1.27 -0.1524,1.8796 -0.06773,0.57573 -0.169333,1.20227 -0.3048,1.8796 l -2.1844,10.922 h 16.9799 l -1.1176,5.6896 h -18.9103 c -1.354667,0 -2.404533,-0.33867 -3.1496,-1.016 -0.745067,-0.7112 -1.1176,-1.65947 -1.1176,-2.8448 0,-0.3048 0.01693,-0.57573 0.0508,-0.8128 0.03387,-0.27093 0.06773,-0.47413 0.1016,-0.6096 l 2.0828,-10.5664 c 0.1016,-0.47413 0.186267,-0.93133 0.254,-1.3716 0.06773,-0.47413 0.1016,-0.9652 0.1016,-1.4732 0,-0.77893 -0.2032,-1.40547 -0.6096,-1.8796 -0.4064,-0.508 -1.100667,-0.762 -2.0828,-0.762 -0.880533,0 -1.6764,0.23707 -2.3876,0.7112 -0.7112,0.47413 -1.354667,1.04987 -1.9304,1.7272 -0.6096,0.7112 -1.134533,1.50707 -1.5748,2.3876 -0.440267,0.84667 -0.762,1.778 -0.9652,2.794 l -2.7432,13.716 z m 39.420767,-29.6164 c -1.253067,0 -2.1844,-0.23707 -2.794,-0.7112 -0.575733,-0.47413 -0.8636,-1.1176 -0.8636,-1.9304 0,-0.3048 0.03387,-0.64347 0.1016,-1.016 0.06773,-0.37253 0.135467,-0.7112 0.2032,-1.016 0.1016,-0.44027 0.254,-0.88053 0.4572,-1.3208 0.2032,-0.44027 0.491067,-0.82973 0.8636,-1.1684 0.372533,-0.33867 0.846667,-0.6096 1.4224,-0.8128 0.575733,-0.23707 1.286933,-0.3556 2.1336,-0.3556 1.253066,0 2.167469,0.23707 2.743199,0.7112 0.6096,0.47413 0.9144,1.1176 0.9144,1.9304 0,0.3048 -0.0339,0.64347 -0.1016,1.016 -0.0677,0.37253 -0.13547,0.7112 -0.2032,1.016 -0.1016,0.44027 -0.254,0.88053 -0.4572,1.3208 -0.2032,0.44027 -0.49107,0.82973 -0.8636,1.1684 -0.372533,0.33867 -0.846666,0.62653 -1.422399,0.8636 -0.575733,0.2032 -1.286933,0.3048 -2.1336,0.3048 z m -4.064,29.6164 c -1.388533,0 -2.506133,-0.37253 -3.3528,-1.1176 -0.8128,-0.74507 -1.2192,-1.7272 -1.2192,-2.9464 0,-0.33867 0.0508,-0.762 0.1524,-1.27 l 4.2672,-21.336 h 7.112 l -4.2164,20.9804 H 103.769 l -1.1176,5.6896 z m 8.788409,0 5.334,-26.67 h 7.112 l -1.2192,6.1976 h 0.3048 c 1.016,-2.1336 2.21827,-3.79307 3.6068,-4.9784 1.38853,-1.2192 3.13267,-1.8288 5.2324,-1.8288 2.06587,0 3.64067,0.6096 4.7244,1.8288 1.1176,1.18533 1.6764,2.87867 1.6764,5.08 0,0.64347 -0.0508,1.27 -0.1524,1.8796 -0.0677,0.57573 -0.16933,1.20227 -0.3048,1.8796 l -2.1844,10.922 h 14.86323 l -1.1176,5.6896 h -16.79363 c -1.35467,0 -2.40453,-0.33867 -3.1496,-1.016 -0.74507,-0.7112 -1.1176,-1.65947 -1.1176,-2.8448 0,-0.3048 0.0169,-0.57573 0.0508,-0.8128 0.0339,-0.27093 0.0677,-0.47413 0.1016,-0.6096 l 2.0828,-10.5664 c 0.1016,-0.47413 0.18627,-0.93133 0.254,-1.3716 0.0677,-0.47413 0.1016,-0.9652 0.1016,-1.4732 0,-0.77893 -0.2032,-1.40547 -0.6096,-1.8796 -0.4064,-0.508 -1.10067,-0.762 -2.0828,-0.762 -0.88053,0 -1.6764,0.23707 -2.3876,0.7112 -0.7112,0.47413 -1.35467,1.04987 -1.9304,1.7272 -0.6096,0.7112 -1.13453,1.50707 -1.5748,2.3876 -0.44027,0.84667 -0.762,1.778 -0.9652,2.794 l -2.7432,13.716 z m 38.66226,-0.0241 c -3.79307,0 -3.27162,-0.38235 -5.13429,-2.41435 -1.86267,-2.06587 -2.794,-4.8768 -2.794,-8.4328 0,-2.1336 0.33867,-4.18253 1.016,-6.1468 0.67733,-1.99813 1.64253,-3.74227 2.8956,-5.2324 1.25307,-1.524 2.77707,-2.7432 4.572,-3.6576 1.79493,-0.9144 3.79307,-1.3716 5.9944,-1.3716 1.016,0 2.0828,0.11853 3.2004,0.3556 1.1176,0.23707 2.1336,0.64347 3.048,1.2192 0.94827,0.54187 1.7272,1.28693 2.3368,2.2352 0.64347,0.94827 0.9652,2.15053 0.9652,3.6068 0,1.38853 -0.32173,2.6416 -0.9652,3.7592 -0.64347,1.08373 -1.64253,2.032 -2.9972,2.8448 -1.35467,0.77893 -3.0988,1.40547 -5.2324,1.8796 -2.1336,0.44027 -4.69053,0.7112 -7.6708,0.8128 -0.0677,0.3048 -0.1016,0.54187 -0.1016,0.7112 v 0.4572 c 0,1.28693 0.33867,2.31987 1.016,3.0988 0.7112,0.77893 1.94733,1.1684 3.7084,1.1684 1.15147,0 2.21827,-0.23707 3.2004,-0.7112 1.016,-0.508 2.11667,-1.50707 3.302,-2.9972 l 4.3688,3.4544 c -1.65947,2.20133 -3.4036,3.7592 -5.2324,4.6736 -1.79493,0.88053 -7.19318,0.68715 -9.49611,0.68715 z m 6.14331,-21.81995 c -1.524,0 -2.82787,0.508 -3.9116,1.524 -1.04987,0.98213 -1.7272,2.3368 -2.032,4.064 l -0.2032,1.1684 c 1.89653,-0.1016 3.43747,-0.27093 4.6228,-0.508 1.2192,-0.23707 2.16747,-0.52493 2.8448,-0.8636 0.67733,-0.37253 1.13453,-0.77893 1.3716,-1.2192 0.23707,-0.44027 0.3556,-0.93133 0.3556,-1.4732 0,-0.57573 -0.1016,-1.03293 -0.3048,-1.3716 -0.2032,-0.37253 -0.4572,-0.64347 -0.762,-0.8128 -0.3048,-0.2032 -0.64347,-0.33867 -1.016,-0.4064 -0.33867,-0.0677 -0.6604,-0.1016 -0.9652,-0.1016 z"
       id="text1"
       aria-label="nine"
       sodipodi:nodetypes="ccccccscscscccscsccccscssccsccscsscsscscsscsscsscsscccccsccccccscscscccscsccccscssccsccscsccsssccsccccsscsccccsscccccsscccs" />
  </g>
</svg>
</Link>
      </div>
      <div className="flex-none">
        <ul className="menu menu-horizontal px-1 gap-2">
          <li>
            <Link href="/" className="font-bold">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth={1.5}
                stroke="currentColor"
                className="size-4"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
                />
              </svg>
              Home
            </Link>
          </li>
          <li>
            {!isLoggedIn ? (
              <button
                className="btn btn-accent btn-sm h-full rounded-full"
                onClick={() => window.location.assign("/nine/login")}
                style={{ backgroundColor: "#00BF8F" }}
              >
                Login
              </button>
            ) : (
              <details>
                <summary className="font-bold">
                  <div className="avatar">
                    <div className="w-4 rounded-full">
                      <img src={profilePicture} />
                    </div>
                  </div>{" "}
                  {username}
                </summary>
                <ul className="p-2 bg-base-100 rounded-t-none">
                  <li>
                    <Link href="/profile" className="font-bold">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        strokeWidth={1.5}
                        stroke="currentColor"
                        className="size-4"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
                        />
                      </svg>
                      Profile
                    </Link>
                  </li>
                  <li>
                    <Link href="/" className="font-bold">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        strokeWidth={1.5}
                        stroke="currentColor"
                        className="size-4"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          d="M12 4.5v15m7.5-7.5h-15"
                        />
                      </svg>
                      Create
                    </Link>
                  </li>
                  <li>
                    <Link href="/" className="font-bold">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        strokeWidth={1.5}
                        stroke="currentColor"
                        className="size-4"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          d="M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"
                        />
                      </svg>
                      Preferences
                    </Link>
                  </li>
                </ul>
              </details>
            )}
          </li>
        </ul>
      </div>
    </div>
  );
};

export default Navbar;
